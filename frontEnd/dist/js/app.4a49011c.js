(function(){"use strict";var t={9316:function(t,o,e){var a=e(144),r=function(){var t=this,o=t._self._c;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},i=[],s={name:"App"},n=s,l=e(1001),d=(0,l.Z)(n,r,i,!1,null,null,null),c=d.exports,u=e(6154),p=e(6667),m=e.n(p),v=function(){var t=this,o=t._self._c;return o("div",[o("NavigationTab",{attrs:{"exact-active-class":"active"}}),o("b-col",{staticClass:"text-center mt-5",attrs:{"align-self":"center"}},[o("b-table",{staticClass:"mt-5",attrs:{striped:"",hover:"",items:t.produtos,fields:t.fields},on:{"row-clicked":t.selecionaProduto}})],1)],1)},b=[],f=function(){var t=this,o=t._self._c;return o("b-navbar",{attrs:{type:"dark",variant:"dark",fixed:"top",toggleable:"md"}},[o("div",{staticClass:"d-flex align-items-center"},[o("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),o("b-navbar-brand",{attrs:{href:"/"}},[o("img",{staticClass:"d-inline-block align-top",attrs:{src:"logo.png",width:"100",height:"30",alt:"Logo"}})])],1),o("b-collapse",{attrs:{"is-nav":"",id:"nav-collapse"}},[o("b-navbar-nav",[o("b-nav-item",{attrs:{"exact-active-class":"active",to:{path:"/cadastro-produto"}}},[t._v("Cadastro de Produto")]),o("b-nav-item",{attrs:{"exact-active-class":"active",to:{path:"/cadastro-venda"}}},[t._v("Cadastro de Venda")]),o("b-nav-item",{attrs:{"exact-active-class":"active",to:{path:"/listagem-produtos"}}},[t._v("Listagem de Produtos")]),o("b-nav-item",{attrs:{"exact-active-class":"active",to:{path:"/listagem-vendas"}}},[t._v("Listagem de Vendas")])],1)],1)],1)},h=[],_={computed:{rotaAtual(){return this.$route.path}},methods:{isActive(t){return this.rotaAtual===t}},mounted(){console.log("Rota atual:",this.rotaAtual)}},g=_,y=(0,l.Z)(g,f,h,!1,null,null,null),x=y.exports,T=e(6521),P={components:{NavigationTab:x,BTable:T.h},data(){return{produtos:[],fields:[{key:"nome",label:"Nome"},{key:"preco",label:"Preço (R$)",formatter:this.precoFormatter},{key:"tipo_produto_perc_imposto",label:"Imposto (%)",formatter:this.impostoFormatter}]}},mounted(){this.carregaProdutos()},methods:{carregaProdutos(){u.Z.get("/produto").then((t=>{this.produtos=t.data}))},selecionaProduto(t){console.log(`Produto selecionado: ${t.nome}`)}},filters:{precoFormatter(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)},impostoFormatter(t){return new Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:2}).format(t)}}},k=P,C=(0,l.Z)(k,v,b,!1,null,null,null),w=C.exports,I=function(){var t=this,o=t._self._c;return o("div",[o("b-toast",{attrs:{"no-auto-hide":!0}}),o("NavigationTab",{attrs:{"exact-active-class":"active"}}),o("b-row",{staticClass:"justify-content-center text-center mt-5"},[o("b-col",{staticClass:"text-center",attrs:{md:"6",lg:"4","align-self":"center"}},[o("b-form",{ref:"form",staticStyle:{margin:"25px"},on:{submit:function(o){return o.preventDefault(),t.cadastrarProduto.apply(null,arguments)}}},[o("b-form-group",{attrs:{id:"input-nome-produto",label:"Produto:","label-for":"input-nome"}},[o("b-form-input",{staticClass:"w-100",attrs:{id:"input-nome",required:""},model:{value:t.nomeProduto,callback:function(o){t.nomeProduto=o},expression:"nomeProduto"}})],1),o("b-form-group",{attrs:{id:"input-descricao-produto",label:"Descrição:","label-for":"input-descricao"}},[o("b-form-input",{attrs:{id:"input-descricao"},model:{value:t.descricaoProduto,callback:function(o){t.descricaoProduto=o},expression:"descricaoProduto"}})],1),o("b-form-group",{attrs:{id:"input-preco-produto",label:"Preço:","label-for":"input-preco"}},[o("b-input-group",{attrs:{id:"input-group-preco",label:"Preço:",prepend:"R$",append:",00","label-for":"input-preco"}},[o("b-form-input",{attrs:{id:"input-preco",type:"number",required:""},model:{value:t.precoProduto,callback:function(o){t.precoProduto=o},expression:"precoProduto"}})],1)],1),o("b-form-group",{attrs:{id:"input-tipo-produto",label:"Tipo:","label-for":"input-tipo"}},[o("b-form-select",{staticClass:"w-100",attrs:{id:"input-tipo",options:t.tiposOptions,required:""},model:{value:t.tipoProdutoSelecionado,callback:function(o){t.tipoProdutoSelecionado=o},expression:"tipoProdutoSelecionado"}})],1),o("b-button-group",{staticClass:"w-100"},[o("b-button",{attrs:{variant:"dark"},on:{click:function(o){t.exibirModalCadastroTipo=!0}}},[t._v("Cadastrar Tipo de Produto")]),o("b-button",{attrs:{disabled:!t.nomeProduto||0===t.precoProduto||!t.tipoProdutoSelecionado,type:"submit",variant:"primary"}},[t._v("Cadastrar Produto")])],1),o("b-modal",{attrs:{title:"Cadastrar Tipo de Produto","hide-footer":""},model:{value:t.exibirModalCadastroTipo,callback:function(o){t.exibirModalCadastroTipo=o},expression:"exibirModalCadastroTipo"}},[o("form",[o("b-form-group",{attrs:{label:"Nome Tipo:"}},[o("b-form-input",{attrs:{required:""},model:{value:t.nomeTipo,callback:function(o){t.nomeTipo=o},expression:"nomeTipo"}})],1),o("b-form-group",{attrs:{label:"Percentual de Imposto:"}},[o("b-input-group",{attrs:{append:"%"}},[o("b-form-input",{attrs:{type:"number",required:""},model:{value:t.percImpostoTipo,callback:function(o){t.percImpostoTipo=o},expression:"percImpostoTipo"}})],1)],1),o("b-button-group",{staticClass:"mt-2 btn-group w-100"},[o("b-button",{attrs:{disabled:!t.nomeTipo||!t.percImpostoTipo,variant:"primary"},on:{click:t.cadastrarTipo}},[t._v("Cadastrar")]),o("b-button",{attrs:{variant:"secondary"},on:{click:function(o){t.exibirModalCadastroTipo=!1}}},[t._v("Cancelar")])],1)],1)])],1)],1)],1)],1)},q=[],V=(e(7658),e(575)),S={name:"CadastroProduto",components:{NavigationTab:x,BToast:V.K},data(){return{nomeProduto:"",descricaoProduto:"",precoProduto:0,tipoProdutoSelecionado:"",produtoCadastrado:!1,tipos:[],exibirModalCadastroTipo:!1,nomeTipo:"",percImpostoTipo:0,exibirModal:!1}},mounted(){this.atualizarTipos()},computed:{tiposOptions(){let t=[{value:"",text:"Selecione um tipo"}];return this.tipos.forEach((o=>{t.push({value:o.id_tipo_produto,text:o.nome})})),t}},methods:{atualizarTipos(t){u.Z.get("/tipo_produto").then((o=>{this.tipos=o.data,t&&(this.tipoProdutoSelecionado=t.id_tipo_produto)})).catch((t=>{console.log(t)}))},cadastrarTipo(){u.Z.post("/tipo_produto",{nome:this.nomeTipo,perc_imposto:this.percImpostoTipo}).then((t=>{this.atualizarTipos(t.data),this.exibirModalCadastroTipo=!1,this.nomeTipo="",this.percImpostoTipo=0,console.log(t.data),this.$bvToast.toast("Tipo do produto cadastrado com sucesso!",{title:"Sucesso",variant:"success",autoHideDelay:5e3})})).catch((t=>{console.log(t),this.$bvToast.toast("Erro ao cadastrar o tipo do produto!",{title:"Erro",variant:"danger",autoHideDelay:5e3})}))},cadastrarProduto(){u.Z.post("/produto",{nome:this.nomeProduto,descricao:this.descricaoProduto,preco:this.precoProduto,id_tipo_produto:this.tipoProdutoSelecionado}).then((t=>{console.log(t.data),this.$bvToast.toast("Produto cadastrado com sucesso!",{title:"Sucesso",variant:"success",autoHideDelay:5e3})})).catch((t=>{console.error(t),this.$bvToast.toast("Erro ao cadastrar o produto!",{title:"Erro",variant:"danger",autoHideDelay:5e3})}))}}},D=S,E=(0,l.Z)(D,I,q,!1,null,null,null),$=E.exports,M=function(){var t=this,o=t._self._c;return o("div",[o("b-toast",{attrs:{"no-auto-hide":!0}}),[o("NavigationTab",{attrs:{"exact-active-class":"active"}}),o("div",[o("b-table",{staticClass:"mt-5",attrs:{items:t.items,fields:t.fields,striped:"",responsive:"sm"},scopedSlots:t._u([{key:"cell(show_details)",fn:function(e){return[o("b-button",{attrs:{size:"sm"},on:{click:function(o){return t.carregaDetalhesVenda(e.item,e.index)}}},[t._v(" "+t._s(e._showDetails?"Esconder":"Mostrar")+" Detalhes ")])]}},{key:"row-details",fn:function(e){return[o("b-card",[t._l(e.item.itens_venda,(function(e){return o("b-card",{key:e.id_item_venda,staticClass:"mb-3"},[o("b-row",[o("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[o("b",[t._v("Produto:")])]),o("b-col",[t._v(t._s(e.id_produto))])],1),o("b-row",[o("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[o("b",[t._v("Quantidade:")])]),o("b-col",[t._v(t._s(e.quantidade))])],1),o("b-row",[o("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[o("b",[t._v("Valor Imposto:")])]),o("b-col",[t._v(t._s(e.valor_imposto))])],1),o("b-row",[o("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[o("b",[t._v("Valor Unitario:")])]),o("b-col",[t._v(t._s(e.valor_unitario))])],1)],1)})),o("b-button",{attrs:{size:"sm"},on:{click:e.toggleDetails}},[t._v("Esconder Detalhes")])],2)]}}])})],1)]],2)},B=[],N={components:{NavigationTab:x,BToast:V.K},data(){return{fields:["id_venda","valor_total","valor_imposto","data_hora","show_details"],items:[],selectedItems:[]}},created(){this.carregaVendas()},methods:{carregaVendas(){u.Z.get("/vendas").then((t=>{this.items=t.data.map((t=>({...t,_showDetails:!1})))}))},carregaDetalhesVenda(t,o){const e=this.selectedItems.includes(o);e?this.selectedItems.splice(this.selectedItems.indexOf(o),1):this.selectedItems.push(o),this.items[o]._showDetails=!e,e||this.items[o].itens_venda&&0!==this.items[o].itens_venda.length||u.Z.get(`/venda/${t.id_venda}`).then((t=>{console.log(t.data.itens_venda),t.data.itens_venda.length>0&&a["default"].set(this.items[o],"itens_venda",t.data.itens_venda)})).catch((t=>{console.log(t),this.$bvToast.toast("Não foram encontrados itens para essa venda",{title:"Erro",variant:"danger",autoHideDelay:5e3})}))}}},O=N,Z=(0,l.Z)(O,M,B,!1,null,null,null),F=Z.exports,j=function(){var t=this,o=t._self._c;return o("div",[o("b-toast",{attrs:{"no-auto-hide":!0}}),o("NavigationTab",{attrs:{"exact-active-class":"active"}}),o("b-row",{staticClass:"justify-content-center mt-5"},[o("b-col",{staticClass:"col-md-8 mt-5"},[o("b-row",[o("b-col",{staticClass:"mb-3 mb-md-0",attrs:{md:"4"}},[o("b-form-group",{attrs:{label:"Quantidade:","label-for":"quantidade"}},[o("b-form-input",{attrs:{type:"number",id:"quantidade"},model:{value:t.quantidade,callback:function(o){t.quantidade=o},expression:"quantidade"}})],1)],1),o("b-col",{staticClass:"mb-3 mb-md-0",attrs:{md:"4"}},[o("b-form-group",{attrs:{label:"Produto:","label-for":"produto"}},[o("b-form-select",{attrs:{id:"produto",options:t.produtos,"value-field":"id_produto","text-field":"nome"},model:{value:t.produtoSelecionado,callback:function(o){t.produtoSelecionado=o},expression:"produtoSelecionado"}})],1)],1),o("b-col",{staticClass:"mb-3 mb-md-0 text-center align-self-center",attrs:{md:"4"}},[o("b-button",{attrs:{variant:"primary",disabled:!t.produtoSelecionado||!t.quantidade},on:{click:function(o){return o.preventDefault(),t.adicionarItem.apply(null,arguments)}}},[t._v("Adicionar")])],1)],1),t.itensVenda.length>0?o("b-row",{staticClass:"mt-3"},[o("b-col",[o("b-table",{staticClass:"text-center",attrs:{striped:"",hover:"",items:t.itensVenda,fields:t.fields},scopedSlots:t._u([{key:"cell(produto)",fn:function(o){return[t._v(" "+t._s(o.value.nome)+" ")]}},{key:"cell(quantidade)",fn:function(o){return[t._v(" "+t._s(o.value)+" ")]}},{key:"cell(valor_unitario)",fn:function(o){return[t._v(" "+t._s(t.formatPrice(o.value))+" ")]}},{key:"cell(valor_imposto)",fn:function(o){return[t._v(" "+t._s(t.formatPrice(o.item.valor_imposto))+" ")]}},{key:"cell(valor_imposto_total)",fn:function(o){return[t._v(" "+t._s(t.formatPrice(o.item.valor_imposto_total))+" ")]}},{key:"cell(valor_total)",fn:function(o){return[t._v(" "+t._s(t.formatPrice(o.item.valor_total))+" ")]}},{key:"cell(actions)",fn:function(e){return[o("b-button",{staticClass:"col-8",attrs:{variant:"warning",size:"sm"},on:{click:function(o){e.item&&t.openEditModal(e.item)}}},[t._v("Editar")]),o("b-button",{staticClass:"col-8",attrs:{variant:"danger",size:"sm"},on:{click:function(o){return t.removerItem(e.index)}}},[t._v("Remover")])]}},{key:"head(produto)",fn:function(e){return[o("div",{staticClass:"text-center w-100"},[t._v(t._s(e.label))])]}},{key:"head(quantidade)",fn:function(e){return[o("div",{staticClass:"text-center w-100"},[t._v(t._s(e.label))])]}},{key:"head(valor_unitario)",fn:function(e){return[o("div",{staticClass:"text-center w-100"},[t._v(t._s(e.label))])]}},{key:"head(valor_imposto)",fn:function(e){return[o("div",{staticClass:"text-center w-100"},[t._v(t._s(e.label))])]}},{key:"head(valor_imposto_total)",fn:function(e){return[o("div",{staticClass:"text-center w-100"},[t._v(t._s(e.label))])]}},{key:"head(valor_total)",fn:function(e){return[o("div",{staticClass:"text-center w-100"},[t._v(t._s(e.label))])]}},{key:"head(actions)",fn:function(e){return[o("div",{staticClass:"text-center w-100"},[t._v(t._s(e.label))])]}}],null,!1,4126137983)})],1)],1):o("b-row",{staticClass:"mt-3"},[o("b-col",{staticClass:"text-center"},[o("p",[t._v("Não há itens na venda")])])],1),o("b-row",{staticClass:"mt-3"},[o("b-col",{staticClass:"text-center"},[o("h4",[t._v("Total: "+t._s(t.formatPrice(t.total)))]),o("b-button",{staticClass:"mt-3",attrs:{variant:"primary",disabled:0===t.itensVenda.length},on:{click:function(o){return o.preventDefault(),t.cadastrarVenda.apply(null,arguments)}}},[t._v("Cadastrar Venda")])],1)],1)],1)],1),o("b-modal",{attrs:{id:"edit-modal",title:"Editar Item"},on:{ok:t.updateItem}},[o("b-form-group",{attrs:{label:"Quantidade:","label-for":"edit-quantidade"}},[o("b-form-input",{attrs:{type:"number",id:"edit-quantidade"},model:{value:t.editItem.quantidade,callback:function(o){t.$set(t.editItem,"quantidade",o)},expression:"editItem.quantidade"}})],1)],1)],1)},R=[],H=e(6709),z=e(8051),A=e(2183),L=e(5193),K=e(1220),Q={components:{BToast:V.K,BFormGroup:H.x,BFormSelect:z.K,BFormInput:A.e,BButton:L.T,BTable:T.h,BModal:K.N,NavigationTab:x},data(){return{produtoSelecionado:null,produtos:[],quantidade:0,itensVenda:[],editItem:{},fields:[{key:"produto",label:"Produto"},{key:"quantidade",label:"Quantidade"},{key:"valor_unitario",label:"Valor Unitário"},{key:"valor_imposto",label:"Valor Imposto"},{key:"valor_imposto_total",label:"Valor Imposto Total"},{key:"valor_total",label:"Valor Total"},{key:"actions",label:"Ações"}]}},created(){this.fetchProdutos()},methods:{fetchProdutos(){u.Z.get("/produto").then((t=>{this.produtos=t.data})).catch((t=>{console.error(t)}))},adicionarItem(){const t=this.produtos.find((t=>t.id_produto===this.produtoSelecionado)),o=t.preco,e=this.quantidade*o,a=t.tipo_produto_perc_imposto,r=o*(a/100),i=this.quantidade*(o*(a/100)),s={produto:t,quantidade:this.quantidade,valor_unitario:o,valor_imposto:r,valor_imposto_total:i,valor_total:e};this.itensVenda.push(s),this.produtoSelecionado=null,this.quantidade=null},removerItem(t){this.itensVenda.splice(t,1)},formatPrice(t){const o=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});return o.format(t)},openEditModal(t){this.editItem=t,this.$bvModal.show("edit-modal")},updateItem(){const t=this.itensVenda.findIndex((t=>t===this.editItem));if(-1!==t){const o=this.editItem.produto,e=o.preco,a=this.editItem.quantidade*e,r=o.tipo_produto_perc_imposto,i=e*(r/100),s=this.editItem.quantidade*i,n={produto:o,quantidade:this.editItem.quantidade,valor_unitario:e,valor_imposto:i,valor_imposto_total:s,valor_total:a};this.itensVenda.splice(t,1,n)}this.$bvModal.hide("edit-modal")},cadastrarVenda(){const t=this.itensVenda.map((t=>{const o=t.valor_total,e=t.valor_imposto_total;return{id_produto:t.produto.id_produto,quantidade:t.quantidade,valor_unitario:t.valor_unitario,valor_imposto:t.valor_imposto,valor_total:o,valor_imposto_total:e}})),o=this.itensVenda.reduce(((t,o)=>t+o.valor_total),0),e=this.itensVenda.reduce(((t,o)=>t+o.valor_imposto_total),0);u.Z.post("/venda",{itens_venda:t,valor_total:o,valor_imposto:e},{responseType:"json"}).then((t=>{200===t.status?(console.log("Venda cadastrada com sucesso! ID:",t.data.id_venda),this.itensVenda=[],this.produtoSelecionado=null,this.quantidade=null,this.$bvToast.toast("Venda cadastrada com sucesso!",{title:"Sucesso",variant:"success",autoHideDelay:5e3})):(console.log("Erro ao cadastrar venda!"),this.$bvToast.toast("Erro ao cadastrar venda!",{title:"Erro",variant:"danger",autoHideDelay:5e3}))})).catch((t=>{console.error(t),this.$bvToast.toast("Erro ao cadastrar venda!",{title:"Erro",variant:"danger",autoHideDelay:5e3})}))}},computed:{total(){return this.itensVenda.reduce(((t,o)=>t+o.valor_total),0)}}},U=Q,G=(0,l.Z)(U,j,R,!1,null,null,null),J=G.exports;a["default"].use(m());const W=[{path:"/",component:$},{path:"/listagem-produtos",component:w},{path:"/cadastro-produto",component:$},{path:"/listagem-vendas",component:F},{path:"/cadastro-venda",component:J}],X=new(m())({mode:"history",routes:W});var Y=X,tt=e(6237);e(7024);a["default"].use(tt.ZPm),u.Z.defaults.baseURL="http://localhost:8080/",a["default"].prototype.$apiUrl="http://localhost:8080",new a["default"]({router:Y,render:t=>t(c)}).$mount("#app")}},o={};function e(a){var r=o[a];if(void 0!==r)return r.exports;var i=o[a]={exports:{}};return t[a].call(i.exports,i,i.exports,e),i.exports}e.m=t,function(){var t=[];e.O=function(o,a,r,i){if(!a){var s=1/0;for(c=0;c<t.length;c++){a=t[c][0],r=t[c][1],i=t[c][2];for(var n=!0,l=0;l<a.length;l++)(!1&i||s>=i)&&Object.keys(e.O).every((function(t){return e.O[t](a[l])}))?a.splice(l--,1):(n=!1,i<s&&(s=i));if(n){t.splice(c--,1);var d=r();void 0!==d&&(o=d)}}return o}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[a,r,i]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};e.O.j=function(o){return 0===t[o]};var o=function(o,a){var r,i,s=a[0],n=a[1],l=a[2],d=0;if(s.some((function(o){return 0!==t[o]}))){for(r in n)e.o(n,r)&&(e.m[r]=n[r]);if(l)var c=l(e)}for(o&&o(a);d<s.length;d++)i=s[d],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(c)},a=self["webpackChunksoftexpert"]=self["webpackChunksoftexpert"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))}();var a=e.O(void 0,[998],(function(){return e(9316)}));a=e.O(a)})();
//# sourceMappingURL=app.4a49011c.js.map